<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.smallbell.modules.app.dao.OrderDao">

    <insert id="insert" parameterType="com.smallbell.modules.app.entity.UserShoppingOrderEntity">
        insert into user_shopping_order (id, user_id, address_id,
                                         name, subhead,
                                         category, description, price,
                                         amount, updateTime, picture,product_id
        )
        values (#{id}, #{userId}, #{addressId},
                #{name}, #{subhead},
                #{category}, #{description}, #{price},
                #{amount}, #{updatetime}, #{picture},#{productId}
               )
    </insert>

    <select id="selectByUserId" resultType="com.smallbell.modules.app.form.order.UserShoppingOrderVo">
        select user_shopping_order.id,
               user_shopping_order.user_id as userId,
               user_address_list.consignee,
               user_address_list.phoneNumber,
               user_address_list.address,
               user_address_list.detailed_address as detailedAddress,
               user_shopping_order.name,
               user_shopping_order.subhead,
               user_shopping_order.description,
               user_shopping_order.price,
               user_shopping_order.picture,
               user_shopping_order.amount,
               user_shopping_order.product_id as productId
        from user_shopping_order,user_address_list
        where user_shopping_order.address_id = user_address_list.id
          and user_shopping_order.user_id=#{userId}
        order by user_shopping_order.id
    </select>
</mapper>